{"version":3,"file":"layout.js","sources":["../../src/utils/layout.ts"],"sourcesContent":[null],"names":["chunk","elements","chunkSize","onlyOnePage","reduce","resultArray","tile","index","chunkIndex","Math","floor","push","chunkElements","tilesInFirstPage","isLastPageDifferentFromFirstPage","defaultWidth","defaultHeight","lastPageWidth","lastPageHeight","chunks","map","ch","page","element","isLastPage","length","width","height","Object","assign","mode","array","modeMap","maxEl","maxCount","i","el","getModeAspectRatio","tracks","filter","track","_b","_a","largestRect","containerWidth","containerHeight","numRects","Error","Number","isInteger","aspectRatio","isNaN","best","area","cols","rows","ceil","width2","height2","getTileSizesWithColConstraint","parentWidth","parentHeight","count","tilesinLastPage","min","sqrt","getTileSizesWithPageConstraint","initialWidth","initialHeight","remWidth","remHeight","getTileSizesWithRowConstraint","maxTileCount","maxRowCount","maxColCount","getVideoTracksFromPeers","peers","includeScreenShareForPeer","filterNonPublishingPeers","peerTiles","peer","videoTrack","audioTrack","auxiliaryTracks","forEach","trackId","type","source","screenShareTrackID","find","trackID"],"mappings":"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"}