import{__awaiter as e}from"../node_modules/tslib/tslib.es6.js";import{useMemo as i,useCallback as o}from"react";import{selectRoomState as t,selectIsConnectedToRoom as n,HMSRoomState as a}from"@100mslive/hms-video-store";import{useHMSActions as r,useHMSStore as m}from"../primitives/HmsRoomProvider.js";import{logErrorHandler as s}from"../utils/commons.js";const d=({name:d="",token:c,metadata:v,handleError:l=s,initEndpoint:u,initialSettings:p,captureNetworkQualityInPreview:f,asRole:k,autoManageVideo:w,autoManageWakeLock:y})=>{const g=r(),j=m(t),h=m(n)||!1,b=j===a.Preview,M=i((()=>({userName:d,authToken:c,metaData:v,rememberDeviceSelection:!0,settings:p,initEndpoint:u,asRole:k,captureNetworkQualityInPreview:f,autoManageVideo:w,autoManageWakeLock:y})),[d,c,v,u,p,f,k,w,y]),P=o((()=>e(void 0,void 0,void 0,(function*(){if(c&&j===a.Disconnected){h&&(yield g.leave());try{yield g.preview(M)}catch(e){l(e,"preview")}}}))),[g,l,c,j,M,h]);return{enableJoin:b,join:o((()=>e(void 0,void 0,void 0,(function*(){if(c)try{yield g.join(M)}catch(e){l(e,"join")}}))),[g,M,l,c]),isConnected:h,preview:P}};export{d as usePreviewJoin};
//# sourceMappingURL=usePreviewJoin.js.map
